<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dilo Android SDK 연동 가이드</title>

    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet"
          id="bootstrap-css">
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/androidstudio.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <style>
        /** Common **/
        * {
            font-size: 16px;
        }

        body {
            background-color: #0D1117;
            border: 1px solid #666666;
            margin: 45px 17%;
            padding: 15px 3%;
        }

        h1, h2, h3, h4, h5, h6, summary, details, li, table, blockquote, p, div, span {
            color: #DDDDDD;
        }

        a, a * {
            color: #57B2FF !important;
        }

        ul {
            list-style: none;
        }

        li {
            padding: 3px 0;
        }

        .tab1 {
            margin-left: 25px;
        }

        .tab2 {
            margin-left: 50px;
        }

        /** 코틀린, 자바 선택 패널 **/
        .panel li {
            padding: 0;
        }

        .panel li > a {
            background-color: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            padding: 5px 15px;
            margin: 5px 10px;
        }

        .panel li > a:hover,
        .panel li.active > a {
            background-color: transparent;
            border: none;
            border-bottom: 3px solid white;
        }

        .panel li > a:focus {
            background-color: transparent !important;
            border: none !important;
            border-bottom: 3px solid white !important;
        }

        pre {
            display: flex;
            margin: 0 0 20px 0 !important;
            padding: 0 !important;
            background-color: #282B2E;
        }

        code:not(.hljs) {
            color: #BEB8B0;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            padding: 3px 5px;
            text-decoration: none;
        }

        code.hljs {
            font-size: 16px;
            padding: 0 1em !important;
        }

        summary {
            margin-bottom: 10px;
        }

        summary:hover {
            cursor: pointer;
        }

        table {
            border-collapse: collapse;
            display: block;
            width: max-content;
            max-width: 100%;
            overflow: auto;
            border-color: grey;
        }

        table th, td {
            border: 1px solid grey;
            padding: 10px 15px
        }

        table tr:nth-of-type(even) {
            background-color: #161B22;
        }

        /** Code Black Panel **/
        .panel-default {
            border: none;
            background-color: transparent;
        }

        .panel-default .nav-tabs {
            border: none;
        }

        .panel-default > .panel-body {
            padding: 0;
        }

        .panel-default > .panel-heading {
            background-color: transparent;
            border-left: 1px solid white;
            border-top: 1px solid white;
            border-right: 1px solid white;
            border-bottom: none;
            padding: 0;
        }

        .panel-heading > .nav-tabs > li.active > a {
            pointer-events: none;
        }

        /** 변수 이름 색상 **/
        .hljs .hljs-variable {
            color: #A9B7C6;
        }

        .align-center {
            display: flex;
            justify-content: center;
        }

        span.pub-ver {
            display: inline-block;
            width: 80px;
        }

        summary:after {
            content: "▶";
            color: #fff;
            float: left;
            font-size: 1rem;
            margin: 3px 5px 0 0;
            padding: 1px 0 3px 0;
            text-align: center;
            width: 20px;
        }

        details[open] summary:after {
            content: "▼";
        }
    </style>
    <script>
        function toggleLang() {
            document.querySelectorAll(".panel-heading > .nav-tabs > li, .panel-body > .tab-content > .tab-pane")
                .forEach(value => {
                    value.classList.toggle("active")
                });

        }
    </script>
</head>
<body>
<h1>Dilo Android SDK 연동 가이드</h1>
<ul>
    <li>본 문서의 내용은 Sample App을 기반으로 작성하였습니다. 해당 App의 코드(특히 <code>ContentActivity</code>)를 함께 참고하시기 바랍니다</li>
</ul>
<h2 id="contents">목차</h2>
<ul>
    <li id="c0-ref"><a href="#c0"><h4>개정 이력</h4></a>
    </li>
</ul>
<ol>
    <li id="c1-ref"><a href="#c1"><h4>시작하기</h4></a>
        <ul>
            <li id="c1-1-ref"><a href="#c1-1">Dilo SDK 추가</a></li>
            <li id="c1-2-ref"><a href="#c1-2">AndroidManifest.xml 속성 지정</a></li>
        </ul>
    </li>

    <li id="c2-ref"><a href="#c2"><h4>광고 설정</h4></a>
        <ul>
            <li id="c2-1-ref"><a href="#c2-1">Companion 광고를 위한 레이아웃 설정 (옵션)</a></li>
            <li id="c2-2-ref"><a href="#c2-2">광고 Skip기능 제공을 위한 Button 할당 (옵션)</a></li>
            <li id="c2-3-ref"><a href="#c2-3">Class <code>RequestParam</code></a></li>
            <li id="c2-4-ref"><a href="#c2-4">필수 파라미터 관련 예시</a></li>
        </ul>
    </li>

    <li id="c3-ref"><a href="#c3"><h4>광고 요청</h4></a>
        <ul>
            <li id="c3-1-ref"><a href="#c3-1">Class <code>AdManager</code></a></li>
            <li id="c3-2-ref"><a href="#c3-2">광고 요청 예시</a></li>
        </ul>
    </li>

    <li id="c4-ref"><a href="#c4"><h4>광고 액션 수신</h4></a>
        <ul>
            <li id="c4-1-ref"><a href="#c4-1">광고 액션</a></li>
            <li id="c4-2-ref"><a href="#c4-2">광고 액션 수신 시퀀스 다이어그램</a></li>
            <li id="c4-3-ref"><a href="#c4-3">광고 액션 수신 예제</a></li>
        </ul>
    </li>

    <li id="c5-ref"><a href="#c5"><h4>데이터 클래스 명세</h4></a>
        <ul>
            <li id="c5-1-ref"><a href="#c5-1">Class <code>AdInfo</code></a></li>
            <li id="c5-2-ref"><a href="#c5-2">Class <code>Progress</code></a></li>
            <li id="c5-3-ref"><a href="#c5-3">Class <code>DiloError</code></a></li>
            <li id="c5-4-ref"><a href="#c5-4">Class <code>DiloUtil</code></a></li>
        </ul>
    </li>

    <li id="c6-ref"><a href="#c6"><h4>Dilo SDK 동작</h4></a>
        <ul>
            <li id="c6-1-ref"><a href="#c6-1">Companion에 대한 동작</a></li>
            <li id="c6-2-ref"><a href="#c6-2">Tracking에 대한 동작</a></li>
            <li id="c6-3-ref"><a href="#c6-3">Audio Focus에 대한 동작</a></li>
            <li id="c6-4-ref"><a href="#c6-4">Notification에 대한 동작</a></li>
            <li id="c6-5-ref"><a href="#c6-5">Audio 재생에 대한 동작</a></li>
        </ul>
    </li>

    <li id="c7-ref"><a href="#c7"><h4>기타</h4></a></li>
</ol>

<hr>

<a href="#c0-ref"><h3 id="c0">개정 이력</h3></a>

<details open>
    <summary><span class="pub-ver">0.6.6</span>2021/12/01</summary>
    <div>
        SDK, 샘플앱
        <ul>
            <li>안드로이드 12 지원</li>
        </ul>
    </div>

    <div>
        가이드
        <ul>
            <li>기존 <code>Kotlin</code> 샘플 코드 가이드에 새롭게 <code>Java</code> 샘플 코드 지원</li>
        </ul>
    </div>
</details>

<hr>

<details>
<summary><span class="pub-ver">0.6.5</span>2021/09/08</summary>
<div>
    SDK
    <ul>
        <li><code>MediaBrowserService</code> 안정성 개선</li>
    </ul>
</div>
</details>

<hr>

<details>
    <summary><span class="pub-ver">0.6.4</span>2021/09/06</summary>

    <div>
        SDK
        <ul>
            <li>
                <code>MediaBrowserCompat.subscribe()</code> 메소드 호출로 <code>onChildrenLoaded()</code> 콜백 시 크래시가 발생하는 현상 수정
            </li>
        </ul>
    </div>
</details>

<hr>
<details>
    <summary><span class="pub-ver">0.6.3</span>2021/08/19</summary>

    <div> SDK
        <ul>
            <li>
                블루투스 장치에서 광고 재생 시 광고를 일시중지/재개할 수 있는 기능을 추가하였습니다
            </li>
            <li class="tab1">
                - 이 기능은 노티피케이션 일시중지/재개 옵션과 함께 동작합니다
            </li>
            <li class="tab1">
                - 이 기능을 설정하기위해는
                <code>RequestParam.Builder().setFlags(RequestParam.FLAG_USE_PAUSE_IN_NOTIFICATION)</code>를 설정하시기
                바랍니다
            </li>
        </ul>
    </div>

</details>

<hr>
<details>
    <summary><span class="pub-ver">0.6.2</span>2021/08/11</summary>

    <div>
        <div>SDK
            <ul>
                <li>
                    광고 재생 시 MediaSession에 광고 메타데이터 정보 업데이트 추가
                </li>
                <li>
                    1. <code>RequestParam.Builder</code>에 앨범 아트 URI를 전달받는 메소드 추가
                </li>
                <li class="tab1">
                    - albumArtUri(albumArtUri: String?)
                </li>
                <li>
                    2. <code>MediaBrowserServiceCompat</code>을 구현한 <code>DiloMediaBrowserService</code> 작성<br>
                </li>
                <li>
                    DiloMediaBrowserService의 MediaSession에 아래 정보가 설정
                </li>
                <li class="tab1">
                    - MediaMetadataCompat.METADATA_KEY_ARTIST : RequestParam.Builder().notificationContentTitle
                </li>
                <li class="tab1">
                    - MediaMetadataCompat.METADATA_KEY_TITLE : RequestParam.Builder().notificationContentText
                </li>
                <li class="tab1">
                    - MediaMetadataCompat.METADATA_KEY_ALBUM_ART_URI : RequestParam.Builder().albumArtUri
                </li>
                <li class="tab1">
                    - MediaMetadataCompat.METADATA_KEY_ALBUM_ART : 앨범 아트 Bitmap
                </li>
                <li class="tab1">
                    - MediaMetadataCompat.METADATA_KEY_DURATION : 광고 길이
                </li>
            </ul>
        </div>
        <div>
            샘플앱
            <ul>
                <li>
                    '설정'에 앨범 URI를 입력받는 EditText 추가
                </li>
            </ul>
        </div>
    </div>

</details>

<hr>
<details>
    <summary><span class="pub-ver">0.6.1</span>2021/07/29</summary>

    <div>
        SDK
        <ul>
            <li>
                안정성 개선
            </li>
        </ul>
    </div>

</details>

<hr>
<details>
    <summary><span class="pub-ver">0.6</span>2021/06/22</summary>

    <div>
        공통 (SDK, 샘플앱, 가이드)
        <ul>
            <li>
                더 나은 지원을 위해 언어가 <code>JAVA</code>에서 <code>Kotlin</code>으로 변경되었습니다
            </li>
        </ul>
    </div>

    <div>
        SDK
        <ul>
            <li>
                <code>JAVA</code>에서의 public 접근 호환을 위하여 아래 클래스들은 <code>JAVA</code>로 유지됩니다
            </li>
            <li class="tab1">
                - <code>Progress</code> <code>AdInfo</code> <code>DiloError</code> <code>DiloUtil</code>
            </li>
            <li>
                간헐적으로 광고주 이름 및 광고명의 인코딩 문제가 발생하는 현상이 수정되었습니다
            </li>
            <li>
                0.5.4 버전에서의 Deprecated 메소드 및 상수가 삭제되었습니다
            </li>
            <li class="tab1">- 메소드 : <code>RequestParam.usePauseInNotification(boolean)</code></li>
            <li class="tab1">
                - 상수 : <code>DiloUtil.INTENT_KEY_PROGRESS</code> <code>DiloUtil.INTENT_KEY_ERROR</code> <code>DiloUtil.INTENT_KEY_AD_INFO</code>
                <code>DiloUtil.INTENT_KEY_MESSAGE</code>>
            </li>
        </ul>
    </div>

    <div>
        가이드
        <ul>
            <li>
                <a href="#iv-필수-파라미터-관련-예시">2-iv. 필수 파라미터 관련 예시</a>가 추가되었습니다
            </li>
        </ul>
    </div>

</details>

<hr>
<details>
    <summary><span class="pub-ver">0.5.4</span>2021/06/04</summary>

    <div>
        추가
        <ul>
            <li>
                <code>RequestParam</code> 클래스에 <strong>Flag</strong>를 지정하는 메소드가 추가되었습니다
            </li>
            <li class="tab1">
                - <code>setFlags(int flags)</code>, <code>addFlags(int flags)</code>, <code>removeFlags(int
                flags)</code>
            </li>
            <li class="tab1">
                - 현재 SDK 기능 및 앞으로 추가될 기능들의 사용 여부를 지정하는 데 사용됩니다
            </li>
            <li class="tab1">
                - <a href="#iii-class-requestparam"><code>RequestParam</code> 클래스</a>에서 <code>RequestParam.FLAG_</code>로
                시작하는
                Flag들을 참고하시기 바랍니다
            </li>
            <li>
                <code>DiloError</code> 클래스에 <code>code</code> 추가
            </li>
            <li class="tab1">- 상세 에러 코드로 처리할 수 있도록 에러코드 추가</li>
            <li class="tab1">- 자세한 코드는 <a href="#iii-class-diloerror"><code>DiloError</code> 클래스</a>를 참고하시기 바랍니다</li>
            <li>Notification에 광고 진행률을 보여주는 프로그레스 바 추가</li>
            <li class="tab1">- 해당 기능은 기본으로 <strong>disable</strong> 상태이며 사용하기 위해 <code>RequestParam.Builder</code>의 Flag
                지정 메소드를
                사용하여 <code>RequestParam.FLAG_USE_PROGRESSBAR_IN_NOTIFICATION</code> Flag를 지정하시기 바랍니다
            </li>
            <li class="tab1">- 자세한 내용은 <a href="#iv-notification에-대한-동작">Notification에 대한 동작</a>을 참고하시기 바랍니다
            </li>
        </ul>
    </div>

    <div>
        수정
        <ul>
            <li>Notification 사용자 일시중지/재개 변경 버튼 활성화 기능 변경</li>
            <li class="tab1">- 해당 기능을 사용/미사용하는데 사용하였던 <code>RequestParam.usePauseInNotification(boolean)</code> 메소드는
                <strong><em>Deprecated</em></strong>
                되었습니다
            </li>
            <li class="tab1">- 더 이상 위 메소드는 기능이 작동하지 않습니다 (다음 릴리즈 버전에서 삭제될 예정입니다)</li>
            <li class="tab1">- 일시중지/재개 버튼 사용 여부는 기본으로 <strong>disable</strong> 상태이며 사용하기 위해
                <code>RequestParam.Builder</code>의 Flag 지정 메소드를
                사용하여 <code>RequestParam.FLAG_USE_PAUSE_IN_NOTIFICATION</code> Flag를 지정하시기 바랍니다
            </li>
            <li><code>DiloUtil</code>에 정의된 Intent에서 Extra 데이터를 가져오기 위한 KEY 상수 이름이 수정되었습니다</li>
            <li class="tab1">- DiloUtil.INTENT<em>KEY</em>로 시작하는 상수는 호환성을 위해 현재 버전에서는 유지되며 다음 릴리즈 버전에서 삭제될 예정입니다</li>
            <li class="tab1 align-center">
                <table>
                    <thead>
                    <tr>
                        <th>기존</th>
                        <th>변경</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>INTENT_KEY_PROGRESS</td>
                        <td>EXTRA_PROGRESS</td>
                    </tr>
                    <tr>
                        <td>INTENT_KEY_ERROR</td>
                        <td>EXTRA_ERROR</td>
                    </tr>
                    <tr>
                        <td>INTENT_KEY_AD_INFO</td>
                        <td>EXTRA_AD_INFO</td>
                    </tr>
                    <tr>
                        <td>INTENT_KEY_MESSAGE</td>
                        <td>EXTRA_MESSAGE</td>
                    </tr>
                    </tbody>
                </table>
            </li>
            <li>
                광고 액션 변경 사항
            </li>
            <li class="tab1">- 광고 요청 후 3초 내에 같은 epiCode로 광고를 요청하면 <code>ON_ERROR</code> 액션을 Broadcast한 후 요청을 무시합니다</li>
            <li class="tab1">- SKIP에 대한 액션 전달</li>
            <li class="tab2">변경 전 : SKIP 시 <code>ON_AD_SKIPPED</code> 액션 전달</li>
            <li class="tab2">변경 후 : SKIP 시 <code>ON_AD_SKIPPED</code> 액션 전달 후 바로 <code>ON_AD_COMPLETED</code>(광고 재생 완료)
                액션 전달
            </li>
            <li>데이터 클래스 변경 사항</li>
            <li class="tab1">- <code>AdInfo</code> <code>DiloError</code> <code>Progress</code> 클래스의 implements 클래스가
                변경되었습니다 <code>Serializable</code>
                -&gt; <code>Parcelable</code></li>
            <li class="tab1">- 따라서 <code>Intent.getSerializableExtra()</code> 대신
                <code>Intent.getParcelableExtra()</code> 를 사용해서 데이터를 가져와야합니다
            </li>
            <li>
                Companion 변경 사항
            </li>
            <li class="tab1">1. 리로드 기능</li>
            <li class="tab2">- 사용자가 닫기 버튼을 눌러 Companion을 닫았거나, Skip 버튼을 눌러 건너뛰었거나, SDK가 광고 재생을 마쳤을 경우 <code>AdManager.reloadCompanion()</code>
                호출
                시 Companion을 리로드 하지 않고 무시합니다
            </li>
            <li class="tab1">2. 로드 기능</li>
            <li class="tab2">- Companion이 있는 광고 유형이어도 Companion View인 <code>kr.co.dilo.sdk.AdView</code>가 사용자에게 보이지 않는
                상황(getWindowVisibility()
                !=
                View.VISIBLE)이 되면 더이상 Companion을 로드하지 않습니다
            </li>
        </ul>
    </div>

</details>

<hr>
<details>
    <summary><span class="pub-ver">0.5.3</span>2021/05/12</summary>

    <div>SDK
        <ul>
            <li>
                광고 액션에 <code>ON_COMPANION_CLOSED</code> 추가
            </li>
            <li class="tab1">
                - 이 액션은 사용자가 Companion 닫기 버튼(ViewGroup)을 눌렀을 때 발생합니다
            </li>
        </ul>
    </div>

    <div>가이드
        <ul>
            <li>
                가이드 내 용어 변경
            </li>
            <li class="tab1">
                - 매체사 -&gt; App
            </li>
        </ul>
    </div>

</details>

<hr>
<details>

    <summary><span class="pub-ver">0.5.2</span>2021/05/10</summary>

    <div>
        <code>RequestParam</code> 클래스 변경 사항
        <ul>
            <li>
                enum <code>AdPositionType</code> 추가
            </li>
            <li>RequestParam 클래스에 필수 값 추가</li>
            <li class="tab1">- <code>adPositionType</code>, <code>channelName</code>, <code>episodeName</code>, <code>creatorName</code>,
                <code>creatorId</code></li>
            <li>광고 액션에 <code>ON_MESSAGE</code> 추가</li>
            <li class="tab1">- App 개발 시 SDK에서 참고할만한 메시지를 전송할 때 발생합니다</li>
            <li class="tab1">- 개발 도중에는 이 액션을 수신하는 것을 권고합니다</li>
            <li><code>DiloError</code> 클래스에 새로운 에러 유형 <code>REQUEST</code>추가</li>
            <li><code>epicode</code>, <code>bundleId</code> URL 인코딩 처리</li>
            <li>필수 값 Validation 처리 (Validation 실패 시 광고 액션 <code>ON_ERROR</code>에서 메시지 확인 가능)</li>
            <li><code>DiloError</code> 클래스 패키지 이동 kr.co.dilo.sdk -&gt; kr.co.dilo.sdk.model</li>
            <li>광고가 재생중일 때 <code>AdManager.start()</code> 중복 호출 처리</li>
            <li>Companion 노출 개선</li>
        </ul>
    </div>
</details>

<hr>
<details>
    <summary><span class="pub-ver">0.5.1</span>2021/04/15</summary>

    <p>Skip 버튼 null 설정 시 오류 처리</p>

</details>

<hr>
<details>
    <summary><span class="pub-ver">0.5</span>2021/04/01</summary>

    <p>최초 작성</p>

</details>

<hr>
<a href="#c1-ref"><h3 id="c1">1. 시작하기</h3></a>
<a href="#c1-1-ref"><h4 id="c1-1">Dilo SDK 추가</h4></a>
<ul>
    <li>최상위 level <code>build.gradle</code>에 maven repository 추가</li>
</ul>
<pre><code class="lang-javascript">allprojects {
    repositories {
        google()
        mavenCentral()

        // DILO Maven Repository 접근 정보
        maven {
            url "s3://maven.dilo.co.kr/release"
            credentials(AwsCredentials) {
                accessKey "AKIAWDHIQRYZCM64U2NM"
                secretKey "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"
            }
        }
    }
}
</code></pre>
<ul>
    <li>App level <code>build.gradle</code>에 디펜던시 추가</li>
</ul>
<pre><code class="lang-javascript">dependencies {
    ...
    implementation 'kr.co.dilo:dilo-sdk:0.6.5'
}
</code></pre>
<a href="#c1-2-ref"><h4 id="c1-2">AndroidManifest.xml 속성 지정</h4></a>
<ul>
    <li>필수 퍼미션 추가</li>
</ul>
<pre><code class="lang-xml">&lt;manifest
        xmlns:android="http://schemas.android.com/apk/res/android"
        package="kr.co.dilo.sample.app"
&gt;
    ...
    &lt;!-- 필요 권한 설정 --&gt;
    &lt;uses-permission android:name="android.permission.INTERNET"/&gt;
    &lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/&gt;

    &lt;!-- 네트워크 보안 설정 (targetSdkVersion 28 이상) --&gt;
    &lt;!-- 광고 노출 및 클릭이 정상적으로 동작하기 위해서 cleartext 네트워크 설정 필요 --&gt;
    &lt;application android:usesCleartextTraffic="true"/&gt;
&lt;/manifest&gt;
</code>
</pre>

<hr>

<a href="#c2-ref"><h3 id="c2">2. 광고 설정</h3></a>
<a href="#c2-1-ref"><h4 id="c2-1">i. Companion 광고를 위한 레이아웃 설정 (옵션)</h4></a>
<ul>
    <li>App에서 Companion(Image)을 포함하는 광고 노출을 원하는 경우 Companion이 노출될 레이아웃(<code>kr.co.dilo.sdk.AdView</code>)을 선언합니다.</li>
    <li>Companion 닫기 버튼을 제공할 경우, 해당 레이아웃(<code>ViewGroup</code>)을 포함하여 할당합니다.</li>
</ul>
<pre><code class="lang-xml">&lt;!--
     eg) Companion을 보여줄 레이아웃을 'kr.co.dilo.sdk.AdView'로 추가
         Companion 부모 레이아웃의 크기를 1000px * 1000px로 설정
         닫기 버튼을 할당하기 위한 RelativeLayout을 오른쪽 위에 추가
--&gt;
&lt;FrameLayout
        android:layout_width="1000px"
        android:layout_height="1000px"&gt;

    &lt;kr.co.dilo.sdk.AdView
            android:id="@+id/companion_ad_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
    /&gt;

    &lt;RelativeLayout
            android:id="@+id/companion_close_button"
            android:layout_width="25dp"
            android:layout_height="25dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="15dp"
            android:layout_gravity="right|top"
            android:orientation="vertical"
            android:background="@drawable/close_button"
    >
    &lt;/RelativeLayout&gt;
&lt;/FrameLayout&gt;
</code></pre>
<a href="#c2-2-ref"><h4 id="c2-2">ii. 광고 Skip기능 제공을 위한 Button 할당 (옵션)</h4></a>
<ul>
    <li>App에서 광고 Skip기능을 제공할 경우 SKIP 버튼(Button)을 선언합니다.</li>
    <li>Dilo SDK는 Skip 가능한 시점에만 해당 버튼을 Visible 처리합니다.</li>
</ul>
<blockquote>
    <p>닫기 버튼의 위치는 Companion 우측 상단에 구현하는 것을 권고합니다</p>
    <p>참고로 Dilo의 opt-out 버튼은 항상 우측 하단에 위치합니다</p>
</blockquote>
<p align="center">
    <img src="https://user-images.githubusercontent.com/73524723/113123506-9ed89d80-924f-11eb-8598-d933e0744d74.png">
</p>
<pre><code class="lang-xml">&lt;!-- eg) Skip 버튼을 App 내 원하는 곳에 위치하여 레이아웃 설정 --&gt;
&lt;Button
        android:id="@+id/skip_button"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:textColor="@android:color/white"
        android:background="@drawable/skip_button"
        android:layout_marginLeft="0dp"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"
        android:textSize="10sp"
        android:visibility="invisible"
/&gt;
</code></pre>
<a href="#c2-3-ref"><h4 id="c2-3">iii. Class <code>RequestParam</code></h4></a>
<blockquote>
    <p>광고 요청에 필요한 클래스 및 열거 명세입니다</p>
    <ul>
        <li>
            class <code>RequestParam</code>, <code>RequestParam.Builder</code> <br>
        </li>
        <li>
            enum <code>RequestParam.ProductType</code>, <code>RequestParam.FillType</code>, <code>RequestParam.AdPositionType</code>
        </li>
    </ul>
    <p>RequestParam.Builder를 통해 필요한 광고 요청을 세팅할 수 있습니다</p>
</blockquote>


<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class RequestParam {
    class Builder {
        ///////////////////////
        // 필수 사항
        ///////////////////////
        // 누락 또는 유효하지 않은 값 입력 시 ACTION_ON_ERROR 액션이 전달됩니다
        ///////////////////////

        /**
         * 번들 ID(패키지 이름)를 설정합니다
         *      ※ 광고요청 전 DILO 시스템에 등록되어야 합니다
         *      ※ 등록되어있지 않으면 항상 NO-FILL 응답을 리턴합니다
         *      ※ 테스트 시에는 "com.queen.sampleapp"를 지정하고 NO-FILL 응답 시 문의 메일 부탁드립니다
         *      ※ URL 인코딩되어있지 않아야 합니다 (딜로 SDK 내부에서 처리합니다)
         */
        fun bundleId(bundleId: String): Builder

        /**
         * 에피소드 코드를 설정합니다
         *      ※ 광고요청 전 DILO 시스템에 등록되어야 합니다
         *      ※ 등록되어있지 않으면 항상 NO-FILL 응답을 리턴합니다
         *      ※ 테스트 시에는 "test_live"를 지정하고 NO-FILL 응답 시 문의 메일 부탁드립니다
         *      ※ URL 인코딩되어있지 않아야 합니다 (딜로 SDK 내부에서 처리합니다)
         *          ex) https://test.com/audio/episode_20210410.mp3
         *      ※ 컨텐츠 재생 시점이 아닌 지점의 광고 삽입의 에피소드 코드는 문의 메일 부탁드립니다
         *          ex) 앱 첫 실행 시점, 앱 종료 직전, 특정 메뉴 터치 시점 등
         */
        fun epiCode(epiCode: String): Builder

        /**
         * 에피소드의 채널 이름을 설정합니다
         * 광고 요청한 에피소드가 속해있는 채널 이름
         * 추후 리포트에 반영되는 값으로 채널 이름이 없을 경우 리포트에 보여질 임의값으로 설정합니다
         *     ex) "매일 아침 9시 세계의 라디오 세상", "앱 시작 광고" ...
         */
        fun channelName(channelName: String): Builder

        /**
         * 에피소드 타이틀을 설정합니다
         * 추후 리포트에 반영되는 값으로 에피소드 타이틀이 없을 경우 리포트에 보여질 임의값 설정
         *     ex) "전세계 확진자 1억 명 임박…되돌아본 코로나19 1년 6개월",
         */
        fun episodeName(episodeName: String): Builder

        /**
         * 에피소드의 창작자 ID(중복되지 않는 고유 식별값)를 설정합니다
         * 매체사에서 창작자를 식별할 수 있는 값
         *     ex) "user#0001", "12391", "F8CA-9283-AFB1C" ...
         * 중복될 경우 같은 창작자로 인식하여 리포트가 집계됩니다
         *     ※ 만약 닉네임같이 변경 가능한 값을 설정할 경우, 변경 시 기존과 다른 창작자로 인식하여 리포트가 다르게 집계됩니다
         *     ※ 이 항목에 개인정보가 포함되지 않도록 유의하시기 바랍니다
         *        Email, 전화번호 등 개인정보가 포함되는 경우에는 적절한 암호/해시화(BASE64, MD5, SHA1 등) 처리를 하시는 것을 권고합니다
         */
        fun creatorId(creatorId: String): Builder

        /**
         * 광고 요청한 에피소드의 창작자 이름을 설정합니다
         * 추후 리포트에 반영되는 값으로 창작자 이름이 없을 경우 리포트에 보여질 임의값 설정
         *     ex) BJ홍길동
         */
        fun creatorName(creatorName: String): Builder

        // 광고 요청 길이를 설정합니다 (초)
        fun drs(@IntRange(from = 0) duration: Int): Builder

        /**
         * 광고 상품 유형을 설정합니다
         * 아래 enum ProductType 참고
         */
        fun productType(productType: ProductType): Builder

        /**
         * 광고 채우기 유형을 설정합니다
         * 아래 enum FillType 참고
         */
        fun fillType(fillType: FillType): Builder

        /**
         * 광고가 컨텐츠에서 삽입된 위치 타입을 설정합니다
         * 아래 enum AdPositionType 참고
         * 광고 요청 시점에따라 설정하여야합니다
         */
        fun adPositionType(adPositionType: AdPositionType): Builder

        // Notification에 보여질 아이콘을 설정합니다
        fun iconResourceId(@DrawableRes iconResourceId: Int): Builder

        ///////////////////////
        // 선택 사항
        ///////////////////////

        /**
         * Companion이 할당된 사이즈를 설정합니다
         * 설정하지 않으면 자동으로 계산된 사이즈가 들어갑니다
         *     ※ 수동으로 설정할 경우 0보다 큰 값이 들어가야합니다 (단위 : pixel)
         */
        fun companionSize(@IntRange(from = 1) width: Int, @IntRange(from = 1) height: Int): Builder

        /**
         * Companion이 보여질 뷰를 설정합니다
         *     ※ 컴패니언이 있는 광고 (ProductType = DILO_PLUS || DILO_PLUS_ONLY) 요청에
         *       이 항목을 설정하지 않으면 컴패니언 없는 광고(DILO)가 나갈 수 있습니다
         */
        fun companionAdView(companionAdView: AdView): Builder

        // Companion 닫기 버튼 뷰를 설정합니다
        fun closeButton(closeButton: ViewGroup?): Builder

        // 광고 Skip 버튼을 설정합니다
        fun skipButton(skipButton: Button?): Builder

        /**
         * Notification 클릭 시 수행할 PendingIntent를 설정합니다
         *     ※ App의 컨텐츠 재생 화면 (광고 재생 화면)으로 설정하는 것을 권고합니다
         */
        fun notificationContentIntent(intent: PendingIntent?): Builder

        // Notification의 타이틀 문구를 설정합니다
        fun notificationContentTitle(notificationContentTitle: String?): Builder

        // Notification의 텍스트 문구를 설정합니다
        fun notificationContentText(notificationContentText: String?): Builder

        /**
         * 앨범 아트 URI
         *     ※ 설정하지 않으면 딜로 이미지가 들어갑니다
         */
        fun albumArtUri(albumArtUri: String?): Builder

        fun setFlags(@Flags flags: Int): Builder    // 플래그를 지정합니다
        fun addFlags(@Flags flags: Int): Builder    // 플래그를 추가합니다
        fun removeFlags(@Flags flags: Int): Builder // 플래그를 삭제합니다
    }

    /**
     * 광고 상품 유형
     */
    enum class ProductType {
        DILO("dilo"),                    // Audio 광고
        DILO_PLUS("dilo_plus"),          // Audio 또는 Audio + Companion 광고
        DILO_PLUS_ONLY("dilo_plus_only") // Audio + Companion 광고 (Companion이 무조건 포함)
    }

    /**
     * 광고 채우기 유형
     */
    enum class FillType {
        /**
         * 1개의 광고 요청 타입
         *      ※ Duration(drs) 은 6, 10, 15, 20 중 하나이어야 합니다.
         *       (다른 값으로 요청하면 "광고 없음(NoFill)" 처리됩니다)
         */
        SINGLE("single"),
        /**
         * 1개의 광고 요청 타입 (6, 10, 15, 20 초 광고중 랜덤)
         *      ※ Duration 은 무시됩니다
         */
        SINGLE_ANY("single_any"),
        /**
         * Duration 만큼 채우는 n 개의 광고 요청 타입
         *      ※ padding 기능 설정 여부에 따라 5 초 이하의 오차발생 가능합니다.
         */
        MULTI("multi")
    }

    // 광고 요청 시점 유형
    enum class AdPositionType {
        PRE("pre"),   // 컨텐츠 재생 시작 직전 지점
        MID("mid"),   // 컨텐츠 재생 50% 지점
        POST("post"); // 컨텐츠 재생 완료 직후 지점
    }

    companion object {
        const val FLAG_USE_PAUSE_IN_NOTIFICATION       = 0x00000001 // Notification에서 일시중지 / 재개 사용 플래그
        const val FLAG_USE_PROGRESSBAR_IN_NOTIFICATION = 0x00000002 // Notification에서 프로그레스 바 사용 플래그
    }
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class RequestParam {
    public static class Builder {
        ///////////////////////
        // 필수 사항
        ///////////////////////
        // 누락 또는 유효하지 않은 값 입력 시 ACTION_ON_ERROR 액션이 전달됩니다
        ///////////////////////

        /**
         * 번들 ID(패키지 이름)를 설정합니다
         *      ※ 광고요청 전 DILO 시스템에 등록되어야 합니다
         *      ※ 등록되어있지 않으면 항상 NO-FILL 응답을 리턴합니다
         *      ※ 테스트 시에는 "com.queen.sampleapp"를 지정하고 NO-FILL 응답 시 문의 메일 부탁드립니다
         *      ※ URL 인코딩되어있지 않아야 합니다 (딜로 SDK 내부에서 처리합니다)
         */
        public Builder bundleId(@NonNull String bundleId);

        /**
         * 에피소드 코드를 설정합니다
         *      ※ 광고요청 전 DILO 시스템에 등록되어야 합니다
         *      ※ 등록되어있지 않으면 항상 NO-FILL 응답을 리턴합니다
         *      ※ 테스트 시에는 "test_live"를 지정하고 NO-FILL 응답 시 문의 메일 부탁드립니다
         *      ※ URL 인코딩되어있지 않아야 합니다 (딜로 SDK 내부에서 처리합니다)
         *          ex) https://test.com/audio/episode_20210410.mp3
         *      ※ 컨텐츠 재생 시점이 아닌 지점의 광고 삽입의 에피소드 코드는 문의 메일 부탁드립니다
         *          ex) 앱 첫 실행 시점, 앱 종료 직전, 특정 메뉴 터치 시점 등
         */
        public Builder epiCode(@NonNull String epiCode);

        /**
         * 에피소드의 채널 이름을 설정합니다
         * 광고 요청한 에피소드가 속해있는 채널 이름
         * 추후 리포트에 반영되는 값으로 채널 이름이 없을 경우 리포트에 보여질 임의값으로 설정합니다
         *     ex) "매일 아침 9시 세계의 라디오 세상", "앱 시작 광고" ...
         */
        public Builder channelName(@NonNull String channelName);

        /**
         * 에피소드 타이틀을 설정합니다
         * 추후 리포트에 반영되는 값으로 에피소드 타이틀이 없을 경우 리포트에 보여질 임의값 설정
         *     ex) "전세계 확진자 1억 명 임박…되돌아본 코로나19 1년 6개월",
         */
        public Builder episodeName(@NonNull String episodeName);

        /**
         * 에피소드의 창작자 ID(중복되지 않는 고유 식별값)를 설정합니다
         * 매체사에서 창작자를 식별할 수 있는 값
         *     ex) "user#0001", "12391", "F8CA-9283-AFB1C" ...
         * 중복될 경우 같은 창작자로 인식하여 리포트가 집계됩니다
         *     ※ 만약 닉네임같이 변경 가능한 값을 설정할 경우, 변경 시 기존과 다른 창작자로 인식하여 리포트가 다르게 집계됩니다
         *     ※ 이 항목에 개인정보가 포함되지 않도록 유의하시기 바랍니다
         *        Email, 전화번호 등 개인정보가 포함되는 경우에는 적절한 암호/해시화(BASE64, MD5, SHA1 등) 처리를 하시는 것을 권고합니다
         */
        public Builder creatorId(@NonNull String creatorId);

        /**
         * 광고 요청한 에피소드의 창작자 이름을 설정합니다
         * 추후 리포트에 반영되는 값으로 창작자 이름이 없을 경우 리포트에 보여질 임의값 설정
         *     ex) BJ홍길동
         */
        public Builder creatorName(@NonNull String creatorName);

        // 광고 요청 길이를 설정합니다 (초)
        public Builder drs(@IntRange(from = 0) int duration); 

        /**
         * 광고 상품 유형을 설정합니다
         * 아래 enum ProductType 참고
         */
        public Builder productType(@NonNull ProductType productType);

        /**
         * 광고 채우기 유형을 설정합니다
         * 아래 enum FillType 참고
         */
        public Builder fillType(@NonNull FillType fillType);

        /**
         * 광고가 컨텐츠에서 삽입된 위치 타입을 설정합니다
         * 아래 enum AdPositionType 참고
         * 광고 요청 시점에따라 설정하여야합니다
         */
        public Builder adPositionType(@NonNull AdPositionType adPositionType);

        // Notification에 보여질 아이콘을 설정합니다
        public Builder iconResourceId(@DrawableRes int iconResourceId); 

        ///////////////////////
        // 선택 사항
        ///////////////////////

        /**
         * Companion이 할당된 사이즈를 설정합니다
         * 설정하지 않으면 자동으로 계산된 사이즈가 들어갑니다
         *     ※ 수동으로 설정할 경우 0보다 큰 값이 들어가야합니다 (단위 : pixel)
         */
        public Builder companionSize(@IntRange(from = 1) int width, @IntRange(from = 1) int height);

        /**
         * Companion이 보여질 뷰를 설정합니다
         *     ※ 컴패니언이 있는 광고 (ProductType = DILO_PLUS || DILO_PLUS_ONLY) 요청에
         *       이 항목을 설정하지 않으면 컴패니언 없는 광고(DILO)가 나갈 수 있습니다
         */
        public Builder companionAdView(@Nullable AdView companionAdView);

        // Companion 닫기 버튼 뷰를 설정합니다
        public Builder closeButton(@Nullable ViewGroup closeButton);
                        
        // 광고 Skip 버튼을 설정합니다
        public Builder skipButton(@Nullable Button skipButton);

        /**
         * Notification 클릭 시 수행할 PendingIntent를 설정합니다
         *     ※ App의 컨텐츠 재생 화면 (광고 재생 화면)으로 설정하는 것을 권고합니다
         */
        public Builder notificationContentIntent(@Nullable PendingIntent intent);

        // Notification의 타이틀 문구를 설정합니다
        public Builder notificationContentTitle(@Nullable String notificationContentTitle);

        // Notification의 텍스트 문구를 설정합니다
        public Builder notificationContentText(@Nullable String notificationContentText);

        /**
         * 앨범 아트 URI
         *     ※ 설정하지 않으면 딜로 이미지가 들어갑니다
         */
        public Builder albumArtUri(@Nullable String albumArtUri);

        public Builder setFlags(@Flags int flags);    // 플래그를 지정합니다
        public Builder addFlags(@Flags int flags);    // 플래그를 추가합니다
        public Builder removeFlags(@Flags int flags); // 플래그를 삭제합니다
    }

    /**
     * 광고 상품 유형
     */
    public enum ProductType {
        DILO("dilo"),                    // Audio 광고
        DILO_PLUS("dilo_plus"),          // Audio 또는 Audio + Companion 광고
        DILO_PLUS_ONLY("dilo_plus_only") // Audio + Companion 광고 (Companion이 무조건 포함)
    }

    /**
     * 광고 채우기 유형
     */
    public enum FillType {
        /**
         * 1개의 광고 요청 타입
         *      ※ Duration(drs) 은 6, 10, 15, 20 중 하나이어야 합니다.
         *       (다른 값으로 요청하면 "광고 없음(NoFill)" 처리됩니다)
         */
        SINGLE("single"),
        /**
         * 1개의 광고 요청 타입 (6, 10, 15, 20 초 광고중 랜덤)
         *      ※ Duration 은 무시됩니다
         */
        SINGLE_ANY("single_any"),
        /**
         * Duration 만큼 채우는 n 개의 광고 요청 타입
         *      ※ padding 기능 설정 여부에 따라 5 초 이하의 오차발생 가능합니다.
         */
        MULTI("multi")
    }

    // 광고 요청 시점 유형
    public enum AdPositionType {
        PRE("pre"),   // 컨텐츠 재생 시작 직전 지점
        MID("mid"),   // 컨텐츠 재생 50% 지점
        POST("post"); // 컨텐츠 재생 완료 직후 지점
    }

    @IntDef(flag = true, value = {
        FLAG_USE_PAUSE_IN_NOTIFICATION,
        FLAG_USE_PROGRESSBAR_IN_NOTIFICATION
    })
    @Retention(RetentionPolicy.SOURCE)
    public @interface Flags {}

    /**
     * 노티피케이션에서 일시중지 / 재개 사용
     */
    public static final int FLAG_USE_PAUSE_IN_NOTIFICATION       = 0x00000001;
    /**
     * 노티피케이션에서 프로그레스 바 사용
     */
    public static final int FLAG_USE_PROGRESSBAR_IN_NOTIFICATION = 0x00000002;
}
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<a href="#c2-4-ref"><h4 id="c2-4">iv. 필수 파라미터 관련 예시</h4></a>
<p>필수 파라미터 <code>채널 이름</code> <code>에피소드 이름</code> <code>크리에이터 ID</code> <code>크리에이터 이름</code> 중 정보가 일부 없는 경우에는 아래와 같이
    전달해 주시기 바랍니다</p>
<ul>
    <li>전달 정보 중 <em><strong>개인정보</strong></em>가 포함되는 경우 적절한 암호/해시화(BASE64, MD5, SHA1 등) 처리를 해서 전달해주시기 바랍니다</li>
</ul>
<div class="align-center">
<table>
    <thead>
    <tr>
        <th>전달 불가 파라미터</th>
        <th>대체 값</th>
        <th>채널 이름</th>
        <th>에피소드 이름</th>
        <th>크리에이터 ID</th>
        <th>크리에이터 이름</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>크리에이터 ID</td>
        <td>대체하거나 누락 불가</td>
        <td align="center">O</td>
        <td align="center">O</td>
        <td align="center">O</td>
        <td align="center">O</td>
    </tr>
    <tr>
        <td>크리에이터 이름</td>
        <td>크리에이터 ID</td>
        <td align="center">O</td>
        <td align="center">O</td>
        <td align="center">O</td>
        <td align="center">X</td>
    </tr>
    <tr>
        <td>채널 이름</td>
        <td>크리에이터 이름</td>
        <td align="center">X</td>
        <td align="center">O</td>
        <td align="center">O</td>
        <td align="center">O</td>
    </tr>
    <tr>
        <td>에피소드 이름</td>
        <td>채널 이름</td>
        <td align="center">O</td>
        <td align="center">X</td>
        <td align="center">O</td>
        <td align="center">O</td>
    </tr>
    <tr>
        <td>채널 이름<br>에피소드 이름</td>
        <td>크리에이터 이름</td>
        <td align="center">X</td>
        <td align="center">X</td>
        <td align="center">O</td>
        <td align="center">O</td>
    </tr>
    <tr>
        <td colspan=10>컨텐츠(에피소드 재생)와 관련 없는 광고 요청 시 아래와 같이 전달해 주시기 바랍니다</td>
    </tr>
    <tr>
        <td>크리에이터 ID, 크리에이터 이름</td>
        <td>Bundle ID</td>
        <td align="center" rowspan=2>O</td>
        <td align="center" rowspan=2>O</td>
        <td align="center" rowspan=2>X</td>
        <td align="center" rowspan=2>X</td>
    </tr>
    <tr>
        <td>채널 이름, 에피소드 이름</td>
        <td>동작 이름</td>
    </tr>
    </tbody>
</table>
</div>

<h4>※ 예시</h4>
<div class="align-center">
<table>
    <thead>
    <tr>
        <th>전달 불가 파라미터</th>
        <th>대체 값</th>
        <th>채널 이름</th>
        <th>에피소드 이름</th>
        <th>크리에이터 ID</th>
        <th>크리에이터 이름</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>크리에이터 ID</td>
        <td>대체하거나 누락 불가</td>
        <td>딜로 상담소</td>
        <td>비밀 상담 1회</td>
        <td><code>dilo1234</code></td>
        <td>BJ딜로</td>
    </tr>
    <tr>
        <td>크리에이터 이름</td>
        <td>크리에이터 ID</td>
        <td>딜로 상담소</td>
        <td>비밀 상담 1회</td>
        <td>dilo1234</td>
        <td><code>dilo1234</code></td>
    </tr>
    <tr>
        <td>채널 이름</td>
        <td>크리에이터 이름</td>
        <td><code>BJ딜로</code></td>
        <td>비밀 상담 1회</td>
        <td>dilo1234</td>
        <td>BJ딜로</td>
    </tr>
    <tr>
        <td>에피소드 이름</td>
        <td>채널 이름</td>
        <td>딜로 상담소</td>
        <td><code>딜로 상담소</code></td>
        <td>dilo1234</td>
        <td>BJ딜로</td>
    </tr>
    <tr>
        <td>채널 이름<br>에피소드 이름</td>
        <td>크리에이터 이름</td>
        <td><code>BJ딜로</code></td>
        <td><code>BJ딜로</code></td>
        <td>dilo1234</td>
        <td>BJ딜로</td>
    </tr>
    <tr>
        <td colspan=10>컨텐츠(에피소드 재생)와 관련 없는 광고 요청 시 아래와 같이 전달해 주시기 바랍니다</td>
    </tr>
    <tr>
        <td>크리에이터 ID,<br>크리에이터 이름</td>
        <td>Bundle ID</td>
        <td rowspan=2><code>앱실행</code></td>
        <td rowspan=2><code>앱실행</code></td>
        <td rowspan=2><code>kr.co.dilo.sample.app</code></td>
        <td rowspan=2><code>kr.co.dilo.sample.app</code></td>
    </tr>
    <tr>
        <td>채널 이름,<br>에피소드 이름</td>
        <td>동작 이름</td>
    </tr>
    </tbody>
</table>
</div>

<a href="#c3-ref"><h3 id="c3">3. 광고 요청</h3></a>
<a href="#c3-1-ref"><h4 id="c3-1">i. Class <code>AdManager</code></h4></a>
<ul>
    <li>광고 요청 및 제어에 대한 전반적인 사항은 <code>AdManager</code> 클래스를 통해 수행합니다</li>
</ul>
<blockquote>
    <p>동일한 메소드를 동시에 여러번 호출하는 것은 의도하지 않은 동작을 초래할 수 있습니다</p>
</blockquote>


<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class AdManager(private val context: Context) {

    val isPlaying: Boolean  // 광고가 재생중인지 여부를 반환합니다
        get() {}

    /**
     * 광고를 시작합니다
     *
     * ※ loadAd()로 광고를 요청한 다음
     *     DiloUtil.ACTION_ON_AD_READY 에서 호출하여야합니다
     */
    fun start()

    fun playOrPause() // 광고를 일시중지 또는 재개합니다

    /**
     * 광고를 Skip 합니다
     *     ※ 광고가 Skip 가능하지 않은 시점에 호출 시 무시됩니다
     *     ※ FillType.MULTI 광고이면 현재 재생중인 하나의 광고만 Skip됩니다
     */
    fun skip()

    fun release() // 광고를 종료하고 리소스를 해제합니다

    /**
     * 컴패니언을 다시 로드합니다
     * @param companionAdView Companion 뷰
     * @param closeButton 닫기 버튼
     *     ※ 현재 재생중인 광고의 ProductType이 hybrid가 아니거나
     *       서비스가 종료되었을 경우, companionAdView의 WindowVisibility가
     *       View.VISIABLE이 아닌 경우 리로드 시 무시됩니다
     * @return 컴패니언 리로드 성공 여부
     */
    fun reloadCompanion(companionAdView: AdView, closeButton: ViewGroup?): Boolean

    fun loadAd(requestParam: RequestParam) // 광고를 요청합니다
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class AdManager {

    // 초기화
    public AdManager(@NonNull Context context);

    public boolean isPlaying();  // 광고가 재생중인지 여부를 반환합니다

    /**
     * 광고를 시작합니다
     *
     * ※ loadAd()로 광고를 요청한 다음
     *     DiloUtil.ACTION_ON_AD_READY 에서 호출하여야합니다
     */
    public void start();

    public void playOrPause(); // 광고를 일시중지 또는 재개합니다

    /**
     * 광고를 Skip 합니다
     *     ※ 광고가 Skip 가능하지 않은 시점에 호출 시 무시됩니다
     *     ※ FillType.MULTI 광고이면 현재 재생중인 하나의 광고만 Skip됩니다
     */
    public void skip();

    public void release(); // 광고를 종료하고 리소스를 해제합니다

    /**
     * 컴패니언을 다시 로드합니다
     * @param companionAdView Companion 뷰
     * @param closeButton 닫기 버튼
     *     ※ 현재 재생중인 광고의 ProductType이 hybrid가 아니거나
     *       서비스가 종료되었을 경우, companionAdView의 WindowVisibility가
     *       View.VISIABLE이 아닌 경우 리로드 시 무시됩니다
     * @return 컴패니언 리로드 성공 여부
     */
    public boolean reloadCompanion(@NonNull AdView companionAdView, @Nullable ViewGroup closeButton);

    public void loadAd(@NonNull RequestParam requestParam); // 광고를 요청합니다
}
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<a href="#c3-2-ref"><h4 id="c3-2">ii. 광고 요청 예시</h4></a>
<p class="tab1">
    App에서 원하는 광고 형태를 <code>RequestParam.Builder</code> 클래스를 통해 <code>RequestParam</code>에 설정한 후<code>AdManager</code>의 <code>loadAd()</code>에 전달하여 광고를 요청합니다
</p>
<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class MyActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        val adManager: AdManager = AdManager(this)

        // 30초를 채우는 n개의 audio(Companion 없는)광고 요청
        val requestParamBuilder: RequestParam.Builder = RequestParam.Builder(this).apply {
            // 필수 항목
            bundleId("com.queen.sampleapp")                // 패키지 설정
            epiCode("test_live")                           // 에피소드 코드 설정
            productType(RequestParam.ProductType.DILO)     // Audio 광고
            fillType(RequestParam.FillType.MULTI)          // n개의 광고
            drs(30)                                        // 30초
            adPositionType(RequestParam.AdPositionType.PRE)// 광고 재생 시점 설정 (컨텐츠 재생 전)
            channelName("딜로")                            // 채널 이름 설정
            episodeName("오디오 광고는 딜로")               // 에피소드 이름 설정
            creatorId("tester666")                         // 크리에이터 ID (식별자) 설정
            creatorName("테스터")                          // 크리에이터 이름 설정
            iconResourceId(R.drawable.notification_icon)   // Notification 아이콘 설정

            adManager.loadAd(requestParamBuilder.build())
        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        val adManager: AdManager = AdManager(this)

        // 랜덤 시간 1개의 광고를 요청
        val requestParamBuilder: RequestParam.Builder = RequestParam.Builder(this).apply {
            // 필수 항목
            bundleId("com.queen.sampleapp")                      // 패키지 설정
            epiCode("test_live")                                 // 에피소드 코드 설정
            productType(RequestParam.ProductType.DILO_PLUS_ONLY) // Audio + Companion 광고
            fillType(RequestParam.FillType.SINGLE_ANY)           // 광고 시간 랜덤(6, 10, 15, 20초 중) 1개 광고
            drs(30)                                              // RequestParam.FillType.SINGLE_ANY 시 duration은 무시됩니다
            adPositionType(RequestParam.AdPositionType.POST)     // 광고 재생 시점 설정 (재생 후)
            channelName("딜로")                                  // 채널 이름 설정
            episodeName("오디오 광고는 딜로")                    // 에피소드 이름 설정
            creatorId("tester666")                               // 크리에이터 ID (식별자) 설정
            creatorName("테스터")                                // 크리에이터 이름 설정
            iconResourceId(R.drawable.notification_icon)         // Notification 아이콘 설정
            // 선택 항목
            companionAdView(companionAdView)                     // Companion View 설정 (Companion이 있는 광고가 나가려면 필수)
            closeButton(companionCloseButton)                    // 닫기 버튼 설정
            skipButton(skipButton)                               // Skip 버튼 설정
            notificationContentIntent(notificationIntent)        // Notification Click PendingIntent 설정
            // Notification 사용자 일시정지/재개 기능, 프로그레스 바 표시 설정
            setFlags(RequestParam.FLAG_USE_PAUSE_IN_NOTIFICATION or RequestParam.FLAG_USE_PROGRESSBAR_IN_NOTIFICATION)
            notificationContentTitle("크리에이터를 후원하는 광고 재생중입니다") // Notification Title 설정 (상단 텍스트)
            notificationContentText("ABC 뉴스")                                 // Notification Text 설정 (하단 텍스트)

            adManager.loadAd(requestParamBuilder.build())
        }
    }
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class MyActivity extends AppCompatActivity {

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        AdManager adManager = new AdManager(this);

        // 30초를 채우는 n개의 audio(Companion 없는)광고 요청
        RequestParam.Builder requestParamBuilder = new RequestParam.Builder(this)
	        // 필수 항목
	        .bundleId("com.queen.sampleapp")                // 패키지 설정
	        .epiCode("test_live")                           // 에피소드 코드 설정
	        .productType(RequestParam.ProductType.DILO)     // Audio 광고
	        .fillType(RequestParam.FillType.MULTI)          // n개의 광고
	        .drs(30)                                        // 30초
	        .adPositionType(RequestParam.AdPositionType.PRE)// 광고 재생 시점 설정 (컨텐츠 재생 전)
	        .channelName("딜로")                            // 채널 이름 설정
	        .episodeName("오디오 광고는 딜로")              // 에피소드 이름 설정
	        .creatorId("tester666")                         // 크리에이터 ID (식별자) 설정
	        .creatorName("테스터")                          // 크리에이터 이름 설정
	        .iconResourceId(R.drawable.notification_icon);  // Notification 아이콘 설정

        adManager.loadAd(requestParamBuilder.build());
    }

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        AdManager adManager = new AdManager(this);

        // 랜덤 시간 1개의 광고를 요청
        RequestParam.Builder requestParamBuilder = RequestParam.Builder(this)
            // 필수 항목
            .bundleId("com.queen.sampleapp")                      // 패키지 설정
            .epiCode("test_live")                                 // 에피소드 코드 설정
            .productType(RequestParam.ProductType.DILO_PLUS_ONLY) // Audio + Companion 광고
            .fillType(RequestParam.FillType.SINGLE_ANY)           // 광고 시간 랜덤(6, 10, 15, 20초 중) 1개 광고
            .drs(30)                                              // RequestParam.FillType.SINGLE_ANY 시 duration은 무시됩니다
            .adPositionType(RequestParam.AdPositionType.POST)     // 광고 재생 시점 설정 (재생 후)
            .channelName("딜로")                                  // 채널 이름 설정
            .episodeName("오디오 광고는 딜로")                     // 에피소드 이름 설정
            .creatorId("tester666")                               // 크리에이터 ID (식별자) 설정
            .creatorName("테스터")                                // 크리에이터 이름 설정
            .iconResourceId(R.drawable.notification_icon)         // Notification 아이콘 설정
            // 선택 항목
            .companionAdView(companionAdView)                     // Companion View 설정 (Companion이 있는 광고가 나가려면 필수)
            .closeButton(companionCloseButton)                    // 닫기 버튼 설정
            .skipButton(skipButton)                               // Skip 버튼 설정
            .notificationContentIntent(notificationIntent)        // Notification Click PendingIntent 설정
            // Notification 사용자 일시정지/재개 기능, 프로그레스 바 표시 설정
            .setFlags(RequestParam.FLAG_USE_PAUSE_IN_NOTIFICATION | RequestParam.FLAG_USE_PROGRESSBAR_IN_NOTIFICATION)
            .notificationContentTitle("크리에이터를 후원하는 광고 재생중입니다") // Notification Title 설정 (상단 텍스트)
            .notificationContentText("ABC 뉴스");                                // Notification Text 설정 (하단 텍스트)

            adManager.loadAd(requestParamBuilder.build())
        }
    }
}
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<a href="#c4-ref"><h3 id="c4">4. 광고 액션 수신</h3></a>
<ul>
    <li>Dilo SDK에서 보내는 광고에 대한 액션 수신은 <code>BroadcastReceiver</code>를 통해 가능합니다</li>
    <li>아래의 모든 액션은 <code>DiloUtil.DILO_INTENT_FILTER</code>에 등록되어 있으니 registerReceiver시 IntentFilter로 등록하거나 <code>DiloUtil.ACTION_</code>으로
        시작하는 아래 액션에서 필요한 액션만 등록해서 사용하시면 됩니다
    </li>
    <li>액션 목록은 아래와 같습니다</li>
</ul>
<a href="#c4-1-ref"><h4 id="c4-1">광고 액션</h4></a>
<div class="align-center">
    <table>
        <thead>
        <tr>
            <th>액션<br>(prefix:DiloUtil.ACTION_)</th>
            <th>설명</th>
            <th style="text-align:center">전달<br>데이터 클래스</th>
            <th>비고</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>RELOAD_COMPANION</td>
            <td>컴패니언 리로드</td>
            <td style="text-align:center"></td>
            <td>Companion이 있는 광고에서 Companion이 노출됨(또는 노출해야 함)<br><br><strong>※비고</strong> : Companion 광고를 노출/숨김 처리 하는
                것은<br><code>AdManager</code>를 초기화 하고 광고를 요청한 뷰에서는<br>자동으로 처리되지만,<br>Task Kill 등으로 뷰가 완전히 사라졌을 경우에는<br><code>AdManager</code>를
                다시 초기화 후에<br>BroadcastReceiver에서 이 액션을 받아 <code>AdManager</code>의<br><code>reloadCompanion(AdView,
                    ViewGroup)</code>을 호출하여<br>리로드하여야합니다
            </td>
        </tr>
        <tr>
            <td>ON_COMPANION_CLOSED</td>
            <td>사용자가 Companion을 닫음</td>
            <td style="text-align:center"></td>
            <td>사용자가 닫기 버튼을 눌러 Companion을 닫음</td>
        </tr>
        <tr>
            <td>ON_SKIP_ENABLED</td>
            <td>광고 스킵 가능</td>
            <td style="text-align:center"></td>
            <td>스킵 가능한 광고의 경우 스킵 가능한 시점 도달</td>
        </tr>
        <tr>
            <td>ON_AD_SKIPPED</td>
            <td>광고 스킵</td>
            <td style="text-align:center"></td>
            <td>사용자가 Skip 버튼을 눌러 광고를 Skip 또는<br>App에서<code>AdManager</code>의 <code>skip()</code> 메소드 호출</td>
        </tr>
        <tr>
            <td>ON_NO_FILL</td>
            <td>광고 없음</td>
            <td style="text-align:center"></td>
            <td>요청에 맞는 조건의 광고가 없음</td>
        </tr>
        <tr>
            <td>ON_AD_READY</td>
            <td>광고 재생<br>준비 완료</td>
            <td style="text-align:center"></td>
            <td>광고가 로드되어 재생 준비가 완료됨</td>
        </tr>
        <tr>
            <td>ON_AD_START</td>
            <td>광고 재생 시작</td>
            <td style="text-align:center"><a href="#class-adinfo">AdInfo</a></td>
            <td>광고 재생이 시작됨</td>
        </tr>
        <tr>
            <td>ON_TIME_UPDATE</td>
            <td>광고 진행 사항<br>업데이트</td>
            <td style="text-align:center"><a href="#class-progress">Progress</a></td>
            <td>광고 진행사항이 업데이트 됨<br><br><strong>※비고</strong> : 이 액션은 광고가 재생중일 때 200ms마다 호출됩니다</td>
        </tr>
        <tr>
            <td>ON_AD_COMPLETED</td>
            <td>광고 재생 완료</td>
            <td style="text-align:center"></td>
            <td>하나의 광고가 재생 완료될 때마다 호출</td>
        </tr>
        <tr>
            <td>ON_ALL_AD_COMPLETED</td>
            <td>모든 광고<br>재생 완료</td>
            <td style="text-align:center"></td>
            <td>모든 광고가 재생 완료되면 한 번 호출</td>
        </tr>
        <tr>
            <td>ON_PAUSE</td>
            <td>광고 일시 중지</td>
            <td style="text-align:center"></td>
            <td>App에서 광고 재생 중 <code>AdManager</code>의 <code>playOrPause()</code> 호출<br>또는 사용자가 Notification에서 일시 중지 버튼 누름
            </td>
        </tr>
        <tr>
            <td>ON_RESUME</td>
            <td>광고 재개</td>
            <td style="text-align:center"></td>
            <td>App에서 광고 일시 중지 중 <code>AdManager</code>의 <code>playOrPause()</code> 호출<br>또는 사용자가 Notification에서 재개 버튼 누름
            </td>
        </tr>
        <tr>
            <td>ON_ERROR</td>
            <td>에러 발생</td>
            <td style="text-align:center"><a href="#class-diloerror">DiloError</a></td>
            <td>광고 요청/로드 또는 재생에 문제가 발생</td>
        </tr>
        <tr>
            <td>ON_MESSAGE</td>
            <td>메시지 전송</td>
            <td style="text-align:center">String</td>
            <td>SDK에서 App으로 메시지를 전달</td>
        </tr>
        <tr>
            <td>ON_SVC_DESTROYED</td>
            <td>서비스 종료</td>
            <td style="text-align:center"></td>
            <td>딜로 SDK 서비스 종료</td>
        </tr>
        </tbody>
    </table>
</div>
<br>
<div>
    <blockquote>
        <p>※ 유의 사항</p>
        <ol>
            <li><code>ON_AD_READY</code> 액션 발생 시 <code>AdManager</code>의 <code>start()</code> 메소드를 호출해야 광고가 시작되므로 이 액션은 항상
                등록하시기 바랍니다
            </li>
            <li><code>ON_NO_FILL</code>, <code>ON_ERROR</code> 발생 시 다른 액션이 발생하지 않고 SDK가 종료되어 App의 컨텐츠를 재생해야하므로 이 액션은 항상
                등록하시기 바랍니다
            </li>
            <li><code>ON_ALL_AD_COMPLETED</code> 또는 <code>ON_SVC_DESTROYED</code> 발생 시 App의 컨텐츠를 재생해야하므로 둘 중 한 액션은 항상 등록하시기
                바랍니다
            </li>
            <li><code>ON_MESSAGE</code> 액션 발생 시 App으로 메시지를 전달하므로 개발하는 동안에는 등록하시기를 권고합니다, 메시지만을 전달하므로 이 액션 수신 시 광고 제어
                메소드(AdManager의 메소드 play(), release() 등)를 호출하지 마시기 바랍니다
            </li>
            <li>Companion 닫기 버튼(ViewGroup)의 클릭 시 이벤트 설정은 setOnClickListener가 아닌 <code>ON_COMPANION_CLOSED</code> 액션을 수신하여
                처리하시기 바랍니다. 리스너의 설정은 무시됩니다
            </li>
        </ol>
    </blockquote>
</div>

<a href="#c4-2-ref"><h4 id="c4-2">광고 액션 수신 시퀀스 다이어그램</h4></a>

<div>
    <p>일반적인 액션 시퀀스 다이어그램은 아래와 같습니다</p>
    <blockquote>
        <p>광고 없음 / 에러</p>
    </blockquote>
    <p align="center">
        <img src="https://user-images.githubusercontent.com/73524723/120272718-7c630f00-c2e8-11eb-9be6-909552ed769d.png">
    </p>
    <blockquote>
        <p>일시중지/재개를 하는 경우</p>
    </blockquote>
    <p align="center">
        <img src="https://user-images.githubusercontent.com/73524723/120272725-7cfba580-c2e8-11eb-9652-72edfb4589d1.png">
    </p>
    <blockquote>
        <p>광고를 SKIP하는 경우</p>
    </blockquote>
    <p align="center">
        <img src="https://user-images.githubusercontent.com/73524723/120272728-7d943c00-c2e8-11eb-801c-3f0bc61edd4c.png">
    </p>
</div>

<a href="#c4-3-ref"><h4 id="c4-3">광고 액션 수신 예제</h4></a>

<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class MyActivity : AppCompatActivity() {

    private val adManager: adManager

    override fun onCreate(savedInstanceBundle: bundle?) {
        registerReceiver(diloActionReceiver, DiloUtil.DILO_INTENT_FILTER)

        adManager = AdManager(this)
        // 광고 요청 생략
    }

    override fun onDestroy() {
        unregisterReceiver(diloActionReceiver)
        super.onDestroy()
    }

    val diloActionReceiver: BroadcastReceiver = object : BroadcastReceiver() {

        override fun onReceive(context: Context, intent: Intent) {
            val action: String? = intent.action

            if (action != null) {
                when (action) {
                    // 컴패니언 리로드 액션
                    DiloUtil.ACTION_RELOAD_COMPANION ->
                        if (adManager?.reloadCompanion(companionAdView!!, companionCloseButton) == true) {
                            adWrapper?.visibility = View.VISIBLE
                        }

                    // 사용자의 컴패니언 닫기 액션
                    DiloUtil.ACTION_ON_COMPANION_CLOSED -> log("사용자가 컴패니언을 닫았습니다")

                    // 광고 준비 완료 액션
                    DiloUtil.ACTION_ON_AD_READY -> {
                        log("광고 준비 완료")
                        adManager?.start()
                        log("광고 재생")
                    }

                    // 광고 플레이 시작 액션
                    DiloUtil.ACTION_ON_AD_START -> {
                        skipOffset = 0L
                        val adInfo: AdInfo? = intent.getParcelableExtra(DiloUtil.EXTRA_AD_INFO)

                        // [광고주] 광고이름
                        adTitle?.text = ("[${adInfo?.advertiserName}] ${adInfo?.title}")
                        adCount?.visibility = View.VISIBLE

                        log("========================================")
                        log("광고 정보")
                        log("타입     : ${adInfo?.type}")
                        log("광고주   : ${adInfo?.advertiserName}")
                        log("광고명   : ${adInfo?.title}")
                        log("길이     : ${adInfo?.duration}초")
                        log("광고 수  : ${adInfo?.currentOffset}/${adInfo?.totalCount}")
                        log("컴패니언 : ${if (adInfo?.hasCompanion == true) "있음" else "없음"}")
                        log("스킵 " + if (adInfo?.skipOffset != 0L) "가능 ${adInfo?.skipOffset?.toDouble().toTimeString()}" else "불가능")
                        log("========================================")
                        log("재생이 시작되었습니다")
                        skipOffset = adInfo?.skipOffset ?: 0L
                        if (adInfo?.skipOffset == 0L) {
                            skipButton?.text = "스킵 불가능"
                            skipButton?.visibility = View.VISIBLE
                        }
                        adWrapper?.visibility = View.VISIBLE
                    }

                    // 광고 재생 완료 액션 (각각의 광고 재생 완료마다 호출)
                    DiloUtil.ACTION_ON_AD_COMPLETED -> log("재생이 완료되었습니다")

                    // 모든 광고 재생 완료 액션 (가장 마지막 광고 재생 완료 시 한 번 호출)
                    DiloUtil.ACTION_ON_ALL_AD_COMPLETED -> log("모든 광고 재생이 완료되었습니다")

                    // 광고 일시 중지 액션
                    DiloUtil.ACTION_ON_PAUSE -> log("일시중지")

                    // 광고 재개 액션
                    DiloUtil.ACTION_ON_RESUME -> log("재개")

                    // 요청한 조건에 맞는 광고 없음 액션
                    DiloUtil.ACTION_ON_NO_FILL -> {
                        log("광고가 없습니다 (No Fill)")
                        adWrapper?.visibility = View.INVISIBLE
                        playContent()
                    }

                    // 스킵 가능한 광고일 때 스킵 가능 시점 도달 액션
                    DiloUtil.ACTION_ON_SKIP_ENABLED -> {
                        log("스킵 가능 시점 도달")
                        if (companionAdView?.visibility == View.VISIBLE) {
                            skipButton?.visibility = View.VISIBLE
                        }
                    }

                    // 에러 발생 액션
                    DiloUtil.ACTION_ON_ERROR -> {
                        val error: DiloError? = intent.getParcelableExtra(DiloUtil.EXTRA_ERROR)
                        log("광고 요청 중 에러가 발생하였습니다\n\t타입: ${error?.type}, 코드 :${error?.code}, 에러: ${error?.error}, 상세: ${error?.detail}")
                        if (error?.code != DiloError.CODE_TOO_MANY_REQUEST) {
                            playContent()
                        }
                    }

                    // 광고 진행 사항 업데이트 액션
                    DiloUtil.ACTION_ON_TIME_UPDATE -> {
                        val progress: Progress? = intent.getParcelableExtra(DiloUtil.EXTRA_PROGRESS)

                        val percent: Int = progress?.run {seconds * 100 / duration}?.toInt() ?: 0

                        progressBar?.progress = percent

                        currentTime?.text = progress?.seconds.toTimeString()
                        totalTime?.text = progress?.duration.toTimeString()
                        adCount?.text = ("광고 [${progress?.current}/${progress?.total}]")

                        if (skipOffset != 0L) {
                            var msg: String? = "건너뛰기"
                            val sec: Int = progress?.seconds?.toInt() ?: 0
                            if (skipOffset - sec > 0) {
                                msg = "${skipOffset - sec}초 후 건너뛰기"
                                skipButton?.visibility = View.VISIBLE
                            }
                            skipButton?.text = msg
                        }
                    }

                    // 사용자 광고 스킵 액션
                    DiloUtil.ACTION_ON_AD_SKIPPED -> log("사용자가 광고를 건너뛰었습니다")

                    // SDK로부터 메시지 수신
                    DiloUtil.ACTION_ON_MESSAGE -> {
                        val msg: String? = intent.getStringExtra(DiloUtil.EXTRA_MESSAGE)
                        log(msg!!)
                    }

                    // SDK 서비스 종료 액션
                    DiloUtil.ACTION_ON_SVC_DESTROYED -> {
                        log("딜로 SDK 서비스 종료")
                        skipButton?.visibility = View.GONE
                        adCount?.visibility = View.GONE
                        playContent()
                    }
                }
            }
        }
    };
}

fun Double?.toTimeString(): String {
    val value = this ?: 0
    val ms = (value).toLong().times(1000)
    val min = ms / 1000 / 60 % 60
    val sec = ms / 1000 % 60
    return String.format("%02d:%02d", min, sec)
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class MyActivity extends AppCompatActivity {

    private AdManager adManager;

    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        registerReceiver(diloActionReceiver, DiloUtil.DILO_INTENT_FILTER);

        adManager = new AdManager(this);
        // 광고 요청 생략
    }

    @Override
    public void onDestroy() {
        unregisterReceiver(diloActionReceiver);
        super.onDestroy();
    }

    BroadcastReceiver diloActionReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent == null) return;

            String action = intent.getAction();

            if (action == null) return;

            switch (action) {
                // 컴패니언 리로드 액션
                case DiloUtil.ACTION_RELOAD_COMPANION:
                    if (adManager != null && adManager.reloadCompanion(companionAdView, companionCloseButton)) {
                        adWrapper.setVisibility(View.VISIBLE);
                    }
                    break;

                // 사용자의 컴패니언 닫기 액션
                case DiloUtil.ACTION_ON_COMPANION_CLOSED:
                    log("사용자가 컴패니언을 닫았습니다");
                    break;

                // 광고 준비 완료 액션
                case DiloUtil.ACTION_ON_AD_READY:
                    log("광고 준비 완료");
                    adManager.start();
                    log("광고 재생");
                    break;

                // 광고 플레이 시작 액션
                case DiloUtil.ACTION_ON_AD_START:
                    skipOffset = 0;
                    AdInfo adInfo = intent.getParcelableExtra(DiloUtil.EXTRA_AD_INFO);

                    // 광고 갯수
                    // eg) 광고 1/3
                    adCount.setText(String.format("광고 %d/%d", adInfo.currentOffset, adInfo.totalCount));
                    // [광고주] 광고이름
                    adTitle.setText(String.format("[%s] %s", adInfo.advertiserName, adInfo.title));

                    log("========================================");
                    log("광고 정보");
                    log(String.format("타입     : %s", adInfo.type));
                    log(String.format("광고주   : %s", adInfo.advertiserName));
                    log(String.format("광고명   : %s", adInfo.title));
                    log(String.format("길이     : %d초", adInfo.duration));
                    log(String.format("광고 수  : %d/%d", adInfo.currentOffset, adInfo.totalCount));
                    log(String.format("컴패니언 : %s", adInfo.hasCompanion ? "있음" : "없음"));
                    log(String.format("스킵 %s", adInfo.skipOffset != 0 ? "가능 " + toTimeString((double) adInfo.skipOffset) : "불가능"));
                    log("========================================");
                    log("재생이 시작되었습니다");

                    skipOffset = adInfo.skipOffset;

                    if (adInfo.skipOffset == 0) {
                        skipButton.setText("스킵 불가능");
                        skipButton.setVisibility(View.VISIBLE);
                    }
                    adWrapper.setVisibility(View.VISIBLE);
                    break;

                // 광고 재생 완료 액션 (각각의 광고 재생 완료마다 호출)
                case DiloUtil.ACTION_ON_AD_COMPLETED:
                    log("재생이 완료되었습니다");
                    break;

                // 모든 광고 재생 완료 액션 (가장 마지막 광고 재생 완료 시 한 번 호출)
                case DiloUtil.ACTION_ON_ALL_AD_COMPLETED:
                    log("모든 광고 재생이 완료되었습니다");
                    break;

                // 광고 일시 중지 액션
                case DiloUtil.ACTION_ON_PAUSE:
                    log("일시중지");
                    break;

                // 광고 재개 액션
                case DiloUtil.ACTION_ON_RESUME:
                    log("재개");
                    break;

                // 요청한 조건에 맞는 광고 없음 액션
                case DiloUtil.ACTION_ON_NO_FILL:
                    log("광고가 없습니다 (No Fill)");
                    adWrapper.setVisibility(View.INVISIBLE);
                    playContent();
                    break;

                // 스킵 가능한 광고일 때 스킵 가능 시점 도달 액션
                case DiloUtil.ACTION_ON_SKIP_ENABLED:
                    log("스킵 가능 시점 도달");
                    if (companionAdView.getVisibility() == View.VISIBLE) {
                        skipButton.setVisibility(View.VISIBLE);
                    }
                    break;

                // 에러 발생 액션
                case DiloUtil.ACTION_ON_ERROR:
                    DiloError error = intent.getParcelableExtra(DiloUtil.EXTRA_ERROR);
                    log(String.format("광고 요청 중 에러가 발생하였습니다\n\t타입: %s, 코드 :%d, 에러: %s, 상세: %s", error.type, error.code, error.error, error.detail));
                    if (error.code != DiloError.CODE_TOO_MANY_REQUEST) {
                        playContent();
                    }
                    break;

                // 광고 진행 사항 업데이트 액션
                case DiloUtil.ACTION_ON_TIME_UPDATE:
                    Progress progress = intent.getParcelableExtra(DiloUtil.EXTRA_PROGRESS);

                    int percent = (int) (progress.seconds * 100 / progress.duration);

                    progressBar.setProgress(percent);

                    currentTime.setText(progress.seconds.toTimeString());
                    totalTime.setText(progress.duration.toTimeString());
                    adCount.setText(String.format("광고 %d/%d", progress.current, progress.total));

                    if (skipOffset != 0L) {
                        String msg = "건너뛰기";

                        if (skipOffset - (int) progress.seconds > 0) {
                            msg = (int) (skipOffset - progress.seconds) + "초 후 건너뛰기";
                            skipButton.setVisibility(View.VISIBLE);
                        }
                        skipButton.setText(msg);
                    }
                    break;

                // 사용자 광고 스킵 액션
                case DiloUtil.ACTION_ON_AD_SKIPPED:
                    log("사용자가 광고를 건너뛰었습니다");
                    break;

                // SDK로부터 메시지 수신
                case DiloUtil.ACTION_ON_MESSAGE:
                    String msg = intent.getStringExtra(DiloUtil.EXTRA_MESSAGE);
                    log(msg);
                    break;

                // SDK 서비스 종료 액션
                case DiloUtil.ACTION_ON_SVC_DESTROYED:
                    log("딜로 SDK 서비스 종료");
                    skipButton.setVisibility(View.GONE);
                    adCount.setVisibility(View.GONE);
                    playContent();
                    break;
            }
        }
    };

    private String toTimeString(Double value) {
        double ms = value * 1000;
        int min = (int) (ms / 1000 / 60 % 60);
        int sec = (int) (ms / 1000 % 60);
        return String.format("%02d:%02d", min, sec);
    }
}
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<a href="#c5-ref"><h3 id="c5">5. 데이터 클래스 명세</h3></a>

<a href="#c5-1-ref" id="class-adinfo"><h4 id="c5-1">i. Class <code>AdInfo</code></h4></a>
<p>광고 정보 클래스</p>
<pre><code class="lang-java">
/**
 * App에 전달하는 광고 정보 클래스
 */
public class AdInfo {
    public String type;           // 타입 (audio : companion 없는 광고 | hybrid : companion 있는 광고)
    public String advertiserName; // 광고주 이름
    public String title;          // 광고 명
    public int totalCount;        // 총 광고 갯수
    public int currentOffset;     // 현재 광고 오프셋 (1부터)
    public long duration;         // 광고 길이 (초)
    public long skipOffset;       // 스킵 오프셋 (초) ※ 스킵 불가능 : 0
    public boolean hasCompanion;  // companion 유무
}

</code></pre>
<blockquote><code>BroadcastReceiver.onReceive()</code>의 인텐트 액션이 <code>DiloUtil.ACTION_ON_AD_START</code>(광고 시작됨) 일때
    <code>DiloUtil.EXTRA_AD_INFO</code>
    Name으로 가져오기
</blockquote>

<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class MyActivity : AppCompatActivity() {

    override fun onReceive(context: Context, intent: Intent) {
        when (intent.action) {
            DiloUtil.ACTION_ON_AD_START -> {
                val adInfo: AdInfo? = intent.getParcelableExtra(DiloUtil.EXTRA_AD_INFO)
                // ...
            }
        }
    }
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class MyActivity extends AppCompatActivity {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (action == null) return;

        switch(action) {
            case DiloUtil.ACTION_ON_AD_START :
                AdInfo adInfo = intent.getParcelableExtra(DiloUtil.EXTRA_AD_INFO)
                // ...
                break;
        }
    }
}
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>


<a href="#c5-2-ref" id="class-progress"><h4 id="c5-2">ii. Class <code>Progress</code></h4></a>

<p>광고 진행 정보 클래스</p>
<pre><code class="lang-java">
/**
 * App에 전달할 광고 진행 정보 클래스
 */
public class Progress {
    public int current;     // 현재 광고 오프셋 (1부터)
    public int total;       // 총 광고 갯수
    public double seconds;  // 현재 재생 시간 (초)
    public double duration; // 총 재생 시간 (초)
}

</code>
</pre>

<blockquote><code>BroadcastReceiver.onReceive()</code>의 인텐트 액션이 <code>DiloUtil.ACTION_ON_TIME_UPDATE</code>(광고 진행사항
    업데이트) 일때
    <code>DiloUtil.EXTRA_PROGRESS</code> Name으로 가져오기
</blockquote>

<blockquote>
    광고 진행사항 업데이트 액션은 광고가 재생중일 때 200ms에 한 번씩 수신됩니다
</blockquote>

<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class MyActivity : AppCompatActivity() {

    override fun onReceive(context: Context, intent: Intent) {
        when(intent.action) {
            DiloUtil.ACTION_ON_TIME_UPDATE -> {
            val progress: Progress? = intent.getParcelableExtra(DiloUtil.EXTRA_PROGRESS)
            // ...
            }
        }
    }
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class MyActivity extends AppCompatActivity {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (action == null) return;

        switch(action) {
            case DiloUtil.ACTION_ON_TIME_UPDATE:
                Progress progress = intent.getParcelableExtra(DiloUtil.EXTRA_PROGRESS)
                // ...
                break;
        }
    }
}
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<a href="#c5-3-ref" id="class-diloerror"><h4 id="c5-3">iii. Class <code>DiloError</code></h4></a>
<p>오류 정보 클래스</p>
<pre><code class="lang-java">
/**
 * App에 전달할 오류 클래스
 */
public class DiloError {

    @ErrorType public String type;   // 에러 유형
    @ErrorCode public int code;      // 에러 코드
    public String error;             // 에러 메시지
    public String detail;            // 에러 메시지 상세

    // 에러 유형
    @StringDef({
            TYPE_REQUEST, // 딜로 광고 요청 에러 반환
            TYPE_MEDIA,   // error, detail에 Media Player 에러가 반환
            TYPE_NETWORK  // error, detail에 Volley 에러 반환
    })
    public @interface ErrorType {}

    // 에러 코드
    @IntDef({
            CODE_TOO_MANY_REQUEST,                        // 광고 요청 후 같은 Epi Code로 3초 동안 10회 이상 요청이 왔을 경우
            CODE_MISSING_REQUIRED_PARAM_BUNDLE_ID,        // Bundle ID 누락
            CODE_MISSING_REQUIRED_PARAM_EPI_CODE,         // Epi Code 누락
            CODE_MISSING_REQUIRED_PARAM_PRODUCT_TYPE,     // Product Type 누락
            CODE_MISSING_REQUIRED_PARAM_FILL_TYPE,        // Fill Type 누락
            CODE_MISSING_REQUIRED_PARAM_AD_POSITION_TYPE, // Ad Position Type 누락
            CODE_MISSING_REQUIRED_PARAM_ICON_RESOURCE_ID, // Icon Resource ID (Notification Icon) 누락
            CODE_MISSING_REQUIRED_PARAM_DURATION,         // Duration 누락 또는 유효하지 않은 값(음수)
            CODE_MISSING_REQUIRED_PARAM_CHANNEL_NAME,     // Channel Name 누락
            CODE_MISSING_REQUIRED_PARAM_EPISODE_NAME,     // Episode Name 누락
            CODE_MISSING_REQUIRED_PARAM_CREATOR_NAME,     // Creator Name 누락
            CODE_MISSING_REQUIRED_PARAM_CREATOR_ID,       // Creator Id 누락
            CODE_MEDIA_ERROR                              // Media Player 오류
    })
    public @interface ErrorCode {}
}

</code></pre>
<blockquote><code>BroadcastReceiver.onReceive()</code>의 인텐트 액션이 <code>DiloUtil.ACTION_ON_ERROR</code>(오류 발생) 일때 <code>DiloUtil.EXTRA_ERROR</code>
    Name으로 가져오기
</blockquote>

<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class MyActivity : AppCompatActivity() {

    override fun onReceive(context: Context, intent: Intent) {
        when(intent.action) {
            DiloUtil.ACTION_ON_ERROR -> {
                val error: DiloError? = intent.getParcelableExtra(DiloUtil.EXTRA_ERROR)
                // ...
            }
        }
    }
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class MyActivity extends AppCompatActivity {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (action == null) return;

        switch(action) {
            case DiloUtil.ACTION_ON_ERROR:
                DiloError error = intent.getParcelableExtra(DiloUtil.EXTRA_ERROR)
                // ...
            break;
        }
    }
}
</code></pre>
            </div>
        </div>
    </div>
</div>

<a href="#c5-4-ref"><h4 id="c5-4">iv. Class <code>DiloUtil</code></h4></a>
<blockquote>
    <p>유틸성 변수/메소드 정의 클래스</p>
</blockquote>
<pre><code class="lang-java">
public class DiloUtil {
    /**
     * 액션 정의
     */

    public static final String ACTION_RELOAD_COMPANION;    // 컴패니언 리로드 액션
    public static final String ACTION_ON_COMPANION_CLOSED; // 사용자의 컴패니언 닫기 액션
    public static final String ACTION_ON_SKIP_ENABLED;     // 광고 스킵 가능 액션
    public static final String ACTION_ON_AD_SKIPPED;       // 사용자의 광고 스킵 액션
    public static final String ACTION_ON_AD_COMPLETED;     // 광고 재생 완료 액션 (각각의 광고 재생 완료마다 호출)
    public static final String ACTION_ON_ALL_AD_COMPLETED; // 모든 광고 재생 완료 액션 (가장 마지막 광고 재생 완료 시 한 번 호출)
    public static final String ACTION_ON_AD_READY;         // 광고 재생 준비 완료 액션
    public static final String ACTION_ON_NO_FILL;          // 요청한 조건에 맞는 광고 없음 액션
    public static final String ACTION_ON_AD_START;         // 광고 재생 시작 액션
    public static final String ACTION_ON_TIME_UPDATE;      // 광고 진행 사항 업데이트 액션
    public static final String ACTION_ON_PAUSE;            // 광고 일시 중지 액션
    public static final String ACTION_ON_RESUME;           // 광고 재개 액션
    public static final String ACTION_ON_ERROR;            // 에러 발생 액션
    public static final String ACTION_ON_MESSAGE;          // 메시지 발생 액션
    public static final String ACTION_ON_SVC_DESTROYED;    // 딜로 서비스 종료 액션

    public static final IntentFilter DILO_INTENT_FILTER;   // 위의 액션들을 모두 등록해놓은 인텐트 필터

    /**
     * 데이터 가져오기위한 키 정의
     */

    public static final String EXTRA_PROGRESS; // 광고 진행 정보
    public static final String EXTRA_ERROR;    // 에러
    public static final String EXTRA_AD_INFO;  // 광고 정보
    public static final String EXTRA_MESSAGE;  // 로그 정보

    public static String DILO_SDK_VERSION;     // 딜로 SDK 버전 eg) "0.6"
    public static String DILO_SDK_BUILD_DATE;  // 딜로 SDK 빌드 시간 eg) 2021/07/11 13:44:13
    public static String DILO_SDK_BUILD_TYPE;  // 딜로 SDK 빌드 타입 eg) release

</code></pre>
<a href="#c6-ref"><h3 id="c6">6. Dilo SDK 동작</h3></a>
<a href="#c6-1-ref"><h4 id="c6-1">i. Companion에 대한 동작</h4></a>
<ol>
    <li>Companion이 있는 광고 재생 시 자동으로 Companion View와 닫기 버튼을 <strong>VISIBLE</strong> 처리합니다</li>
    <li>Companion이 있는 광고가 끝나고 Companion이 없는(Audio만 재생되는) 광고 재생 시 자동으로 Companion View와 닫기 버튼을 <strong>INVISIBLE</strong>
        처리합니다
    </li>
    <li>Skip 가능한 광고의 경우 Skip 가능 시점에만 Skip 버튼을 <strong>VISIBLE</strong> 처리합니다</li>
</ol>
<blockquote>
    <p>※ View를 처리하는 위의 경우 Companion View가 있는 Activity/Fragment가 Destory되면 자동으로 처리하지 못하니 BroadcastReceiver의
        ACTION_RELOAD_COMPANION, ACTION_ON_SKIP_ENABLED 액션을 통해 처리해야합니다</p>
</blockquote>
<ol>
    <li>사용자가 Companion 클릭 시 Landing에 대한 처리가 <strong>자동</strong>으로 이루어집니다</li>
    <li>사용자가 Companion 내의 opt-out 클릭 시에 대한 처리가 <strong>자동</strong>으로 이루어집니다</li>
</ol>
<a href="#c6-2-ref"><h4 id="c6-2">ii. Tracking에 대한 동작</h4></a>
<ul>
    <li>Dilo SDK에서는 아래와 같은 이벤트에 대하여 자동으로 Tracking합니다</li>
</ul>
<div class="align-center">
    <table>
        <thead>
        <tr>
            <th>이벤트</th>
            <th>설명</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>START</td>
            <td>광고가 시작되었을 때</td>
        </tr>
        <tr>
            <td>IMPRESSION</td>
            <td>광고가 시작되고 유효 시간이 지났을 때</td>
        </tr>
        <tr>
            <td>FIRST_QUARTILE</td>
            <td>광고가 1/4 재생되었을 때</td>
        </tr>
        <tr>
            <td>MID_POINT</td>
            <td>광고가 1/2 재생되었을 때</td>
        </tr>
        <tr>
            <td>THIRD_QUARTILE</td>
            <td>광고가 3/4 재생되었을 때</td>
        </tr>
        <tr>
            <td>COMPLETE</td>
            <td>광고가 끝까지 재생되었을 때</td>
        </tr>
        <tr>
            <td>PROGRESS</td>
            <td>광고에서 특정 시간이 지났을 때</td>
        </tr>
        <tr>
            <td>SKIP</td>
            <td>광고를 Skip 했을 때</td>
        </tr>
        <tr>
            <td>ERROR</td>
            <td>Error 가 발생했을 때</td>
        </tr>
        <tr>
            <td>VIEW THROUGH</td>
            <td>Companion이 노출되었을 때</td>
        </tr>
        <tr>
            <td>CLICK</td>
            <td>Companion을 클릭했을 때</td>
        </tr>
        </tbody>
    </table>
</div>
<a href="#c6-3-ref"><h4 id="c6-3">iii. Audio Focus에 대한 동작</h4></a>
<ul>
    <li>광고 요청 시 Dilo SDK에서는 <code>AudioManager.AUDIOFOCUS_GAIN</code>으로 Audio Focus를 요청합니다</li>
    <li>광고 종료 또는 에러 발생, 서비스 종료 시 Audio Focus를 반환합니다</li>
    <li>Audio Focus에 관하여 아래 표와 같이 동작합니다</li>
</ul>
<div class="align-center">
<table>
    <thead>
    <tr>
        <th>Audio Focus<br>(prefix:AudioManager.AUDIOFOCUS_)</th>
        <th>상태</th>
        <th>예시</th>
        <th>Dilo SDK 동작</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>LOSS</td>
        <td>완전히 잃었을 때</td>
        <td>다른 앱에서 오디오/비디오 재생</td>
        <td>광고가 중지됩니다</td>
    </tr>
    <tr>
        <td>LOSS_TRANSIENT</td>
        <td>잠시 잃었을 때</td>
        <td>통화</td>
        <td>광고가 일시중지된 후<br>Audio Focus를 획득하면<br>다시 재생합니다</td>
    </tr>
    <tr>
        <td>LOSS_TRANSIENT_CAN_DUCK</td>
        <td>볼륨 감소 요청이 있었을 때</td>
        <td></td>
        <td>볼륨을 반으로 줄여 재생합니다</td>
    </tr>
    <tr>
        <td>GAIN</td>
        <td>최초 포커스를 얻거나 다시 얻었을 때</td>
        <td></td>
        <td>이전 볼륨으로 재생합니다</td>
    </tr>
    </tbody>
</table>
</div>
<a href="#c6-4-ref"><h4 id="c6-4">iv. Notification에 대한 동작</h4></a>
<blockquote>
    <p><code>RequestParam</code>의 <code>FLAG_USE_PAUSE_IN_NOTIFICATION</code> (사용자 일시 중지 허용) 플래그 지정 따른 Notification 동작에
        대한 설명입니다</p>
</blockquote>
<div>
    <p>1. 플래그 미 지정 시 (기본)</p>
    <ul>
        <li>Notification에 일시중지/재개 버튼이 <strong>사라</strong>집니다</li>
    </ul>
    <p align="center">
        <img src="https://user-images.githubusercontent.com/73524723/120162984-f2596e80-c233-11eb-815e-798fc9333fab.jpg"
             width=50%>
    </p>

    <p>2. 플래그 지정 시</p>
    <ul>
        <li>사용자가 Notification에서 버튼을 눌러 Dilo광고를 <strong>일시중지/재개 할 수</strong> 있습니다</li>
    </ul>
    <p>* 광고가 재생중이어서 일시 중지할 수 있는 상태</p>
    <p align="center">
        <img src="https://user-images.githubusercontent.com/73524723/120162988-f2f20500-c233-11eb-8615-47a4429f550d.jpg"
             width=50%>
    </p>

    <p>* 광고가 일시 중지중이어서 재생할 수 있는 상태</p>
    <p align="center">
        <img src="https://user-images.githubusercontent.com/73524723/120162990-f38a9b80-c233-11eb-90f9-da165648acb5.jpg"
             width=50%>
    </p>
</div>
<blockquote>
    <p><code>RequestParam</code>의 <code>FLAG_USE_PROGRESSBAR_IN_NOTIFICATION</code> (광고 진행 프로그레스 바 표시) 플래그 지정 따른
        Notification 동작에 대한 설명입니다</p>
</blockquote>
<div>
    <p>1. 플래그 미 지정 시 (기본)</p>
    <ul>
        <li>Notification에 프로그레스 바가 <strong>사라</strong>집니다</li>
    </ul>
    <p align="center">
        <img src="https://user-images.githubusercontent.com/73524723/120162984-f2596e80-c233-11eb-815e-798fc9333fab.jpg"
             width=50%>
    </p>

    <p>2. 플래그 지정 시</p>
    <ul>
        <li>Notification에 프로그레스 바가 <strong>표시</strong>됩니다</li>
    </ul>
    <p align="center">
        <img src="https://user-images.githubusercontent.com/73524723/120159975-ba046100-c230-11eb-8004-b2a0d47bddef.jpg"
             width=50%>
    </p>
</div>

<a href="#c6-5-ref"><h4 id="c6-5">v. Audio 재생에 대한 동작</h4></a>
<p>Dilo SDK에서는 광고 오디오 음원을 Service로 재생하여 App이 종료되어도 광고가 재생될 수 있도록 구현하였습니다</p>
<ul>
    <li>Service는 광고가 모두 종료된 후 Destroy됩니다</li>
</ul>
<p>하지만 아래와 같은 상황에서 Dilo SDK Service(광고 재생)가 Android 시스템에 의해 강제 종료될 수 있습니다</p>
<div>
    <div>
        <blockquote>
            1. App의 '배터리 사용 관리' 설정의 백그라운드에서 실행이 꺼져있음
        </blockquote>
        <div class="align-center">
        <img src="https://user-images.githubusercontent.com/73524723/113123501-9da77080-924f-11eb-8bcc-1e35f1ea15e6.jpg"
             width=40%>
        </div>
    </div>
    <div>
        <blockquote>
            2. App의 '배터리 사용 관리' 설정의 백그라운드에서 실행이 꺼져있음
        </blockquote>
        <div class="align-center">
            <img src="https://user-images.githubusercontent.com/73524723/113123504-9e400700-924f-11eb-9ec6-84e0a52dbacf.jpg"
                 width="40%">
        </div>
    </div>
</div>

<a href="#c7-ref"><h3 id="c7">7. 기타</h3></a>
<p>i. App 프로세스 종료 시 유의사항</p>
<p>만약 완전한 앱 종료를 위해 아래와 유사한 프로세스 종료 코드가 있다면</p>

<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class MainActivity : AppCompatActivity() {

    override fun onDestroy() {
      super.onDestroy()

      adManager?.release()

      // 종료코드
      ActivityCompat.finishAffinity(this)
      exitProcess(0)
      Process.killProcess(Process.myPid())

    }
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onDestroy() {
        super.onDestroy();

        if(adManager != null) {
            adManager.release();
        }

        // 종료코드
        ActivityCompat.finishAffinity(this);
        System.exit(0);
        Process.killProcess(Process.myPid());
    }
}
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<p>딜로 SDK 명시적 release() 후 500~1000 ms 지연 시간 뒤에 종료코드를 실행하도록 작성하시기 바랍니다<br>
    딜로 SDK가 종료되는 도중 프로세스가 종료되어 딜로 광고 Notification이 사라지지 않을 수 있습니다</p>

<div class="panel with-nav-tabs panel-default">
    <div class="panel-heading">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#" data-toggle="tab" onclick="toggleLang()">Kotlin</a></li>
            <li><a href="#" data-toggle="tab" onclick="toggleLang()">Java</a></li>
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <div class="tab-pane active">
                <pre>
                    <code class="lang-kt">
class MainActivity : AppCompatActivity() {

    override fun onDestroy() {
      super.onDestroy()

      adManager?.release()

      Handler(Looper.getMainLooper())
          .postDelayed({
              // 종료코드
              ActivityCompat.finishAffinity(this)
              exitProcess(0)
              System.exit(0)
              Process.killProcess(Process.myPid())
          }, 1000)

    }
}
                    </code>
                </pre>
            </div>
            <div class="tab-pane">
                <pre>
                    <code class="lang-java">
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onDestroy() {
        super.onDestroy();

        if(adManager != null) {
            adManager.release();
        }

        new Handler(Looper.getMainLooper())
            .postDelayed(() -> {
                // 종료코드
                ActivityCompat.finishAffinity(this);
                System.exit(0);
                Process.killProcess(Process.myPid());
            },
        1000);
    }
}
                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>

<h3>문의</h3>
<blockquote>
    <p>Dilo SDK 탑재 및 서비스 이용에 관한 문의는 <a href="mailto:dilo@dilo.co.kr">dilo@dilo.co.kr</a>로 문의 주시기 바랍니다</p>
</blockquote>

</body>
</html>
